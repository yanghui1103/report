<?xml version="1.0" encoding="UTF-8"?>
<applications xmlns="http://www.wabacus.com"
					xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
					xsi:schemaLocation="http://www.wabacus.com ../xsd/wabacus.applications.xsd">
	<page id="otherdata_requestpage1" js="/webresources/script/validate.js">
		<report id="report1" title="部门信息列表" type="editablelist2" dataexport="richexcel">
			<interceptor>
				<preaction>
				  <![CDATA[
				  	rrequest.getRequest().setAttribute("descrip", "来自request的默认简介");//将测试数据放入request中
				  ]]>
				</preaction>
			</interceptor>
			<display>
				<col column="guid" displaytype="hidden"/>
				<col column="deptno" label="部门编号" clickorderby="true" valuestyleproperty="style='mso-number-format:\@'">
					<inputbox jsvalidate="isNotEmpty(#label#列不允许为空)"/>
				</col>
				<col column="deptname" label="部门名" clickorderby="true"/>
				<col column="manager" label="部门经理"/>
				<col column="builtdate" label="创建日期" clickorderby="true" width="100px" datatype="date{yyyy-MM-dd}">
					<inputbox type="datepicker"  jsvalidate="isDate(#data#格式不对，必须为yyyy-MM-dd格式)"/>
				</col>
				<col column="performance" label="表现" clickorderby="true" width="150px" filter="true">
					<inputbox type="selectbox">
						<option value="优秀" label="优秀"/> 
						<option value="良好" label="良好" />
						<option value="较好" label="较好" />
						<option value="很差" label="很差" />
					</inputbox>
				</col>
				<col column="description" label="简介" datatype="clob">
					<inputbox type="textareabox"/>
				</col>
			</display>
			<sql>
			  <select>
				<value>
					<![CDATA[SELECT * FROM tbl_department where  {#condition#} order by deptno]]>
				</value>
				<condition name="txtdeptno" label="部门编号">
					<value>
						<![CDATA[(deptno like  '%#data#%' )]]>
					</value>
					<inputbox>
					  	<typeprompt width="200" count="15">
							<promptcol label="deptno" matchmode="anywhere"/>
							<datasource><option dataset="@{select deptno from tbl_department where {#matchcondition#}}"/></datasource>
					  	</typeprompt>
					</inputbox>
				</condition>
			  </select>
			  <insert>
			  	<params>
			    	<param name="desc" value="request{descrip}"/>
			    </params>
			    <value>
		  		 	insert into tbl_department(guid=uuid{},@{deptno},@{deptname},@{manager},@{builtdate},@{performance},description=#{desc});
		  		</value>
			  </insert>
			  <update>
			     update tbl_department(@{deptno},@{deptname},@{manager},@{builtdate},@{performance},@{description}) where guid=@{guid};
			     update tbl_baseinfo(@{deptno}) where deptno=@{deptno__old};
			  </update>
			  <delete>
			  	 delete from tbl_department where deptno=@{deptno__old};
			  </delete>
			</sql>
		</report>
		<footer>${otherdata_requestpage1.footer}</footer>
	</page>
	<page id="otherdata_sessionpage1" js="/webresources/script/validate.js">
		<report id="report1" title="部门信息列表" type="editablelist2" dataexport="richexcel">
			<interceptor>
				<preaction>
				  <![CDATA[
				  	rrequest.getRequest().getSession().setAttribute("descrip", "来自session的默认简介");//将测试数据放入session中
				  ]]>
				</preaction>
			</interceptor>
			<display>
				<col column="guid" displaytype="hidden"/>
				<col column="deptno" label="部门编号" clickorderby="true" valuestyleproperty="style='mso-number-format:\@'">
					<inputbox jsvalidate="isNotEmpty(#label#列不允许为空)"/>
				</col>
				<col column="deptname" label="部门名" clickorderby="true"/>
				<col column="manager" label="部门经理"/>
				<col column="builtdate" label="创建日期" clickorderby="true" width="100px" datatype="date{yyyy-MM-dd}">
					<inputbox type="datepicker"  jsvalidate="isDate(#data#格式不对，必须为yyyy-MM-dd格式)"/>
				</col>
				<col column="performance" label="表现" clickorderby="true" width="150px" filter="true">
					<inputbox type="selectbox">
						<option value="优秀" label="优秀"/> 
						<option value="良好" label="良好" />
						<option value="较好" label="较好" />
						<option value="很差" label="很差" />
					</inputbox>
				</col>
				<col column="description" label="简介" datatype="clob">
					<inputbox type="textareabox"/>
				</col>
			</display>
			<sql>
			  <select>
				<value>
					<![CDATA[SELECT * FROM tbl_department where  {#condition#} order by deptno]]>
				</value>
				<condition name="txtdeptno" label="部门编号">
					<value>
						<![CDATA[(deptno like  '%#data#%' )]]>
					</value>
					<inputbox>
					  <typeprompt width="200" count="15">
							<promptcol label="deptno" matchmode="anywhere"/>
							<datasource><option dataset="@{select deptno from tbl_department where {#matchcondition#}}"/></datasource>
					  	</typeprompt>
					</inputbox>
				</condition>
			  </select>
			  <insert>
			  	<params>
			    	<param name="desc" value="session{descrip}"/>
			    </params>
			    <value>
		  		 	insert into tbl_department(guid=uuid{},@{deptno},@{deptname},@{manager},@{builtdate},@{performance},description=#{desc});
		  		</value>
			  </insert>
			  <update>
			     update tbl_department(@{deptno},@{deptname},@{manager},@{builtdate},@{performance},@{description}) where guid=@{guid};
			     update tbl_baseinfo(@{deptno}) where deptno=@{deptno__old};
			  </update>
			  <delete>
			  	 delete from tbl_department where deptno=@{deptno__old};
			  </delete>
			</sql>
		</report>
		<footer>${otherdata_sessionpage1.footer}</footer>
	</page>
	
	<page id="otherdata_datepage1" js="/webresources/script/validate.js">
		<report id="report1" title="部门信息列表" type="editablelist2" dataexport="richexcel">
			<display>
				<col column="guid" displaytype="hidden"/>
				<col column="deptno" label="部门编号" clickorderby="true" valuestyleproperty="style='mso-number-format:\@'">
					<inputbox jsvalidate="isNotEmpty(#label#列不允许为空)"/>
				</col>
				<col column="deptname" label="部门名" clickorderby="true"/>
				<col column="manager" label="部门经理"/>
				<col column="builtdate" label="创建日期" clickorderby="true" width="100px" datatype="date{yyyy-MM-dd}">
					<inputbox type="datepicker"/>
				</col>
				<col column="performance" label="表现" clickorderby="true" width="150px" filter="true">
					<inputbox type="selectbox">
						<option value="优秀" label="优秀"/>
						<option value="良好" label="良好" />
						<option value="较好" label="较好" />
						<option value="很差" label="很差" />
					</inputbox>
				</col>
				<col column="description" label="简介" datatype="clob">
					<inputbox type="textareabox"/>
				</col>
			</display>
			<sql>
			  <select>
				<value>
					<![CDATA[SELECT * FROM tbl_department where  {#condition#} order by deptno]]>
				</value>
				<condition name="txtdeptno" label="部门编号">
					<value>
						<![CDATA[(deptno like  '%#data#%' )]]>
					</value>
					<inputbox>
					   <typeprompt width="200" count="15">
							<promptcol label="deptno" matchmode="anywhere"/>
							<datasource><option dataset="@{select deptno from tbl_department where {#matchcondition#}}"/></datasource>
					  	</typeprompt>
					</inputbox>
				</condition>
			  </select>
			  <insert>
			  	<params>
			    	<param name="currentdate" value="now{}" datatype="date{yyyy-MM-dd}"/>
			    </params>
			    <value>
		  		 	insert into tbl_department(guid=uuid{},@{deptno},@{deptname},@{manager},builtdate=#{currentdate},@{performance},@{description});
		  		</value>
			  </insert>
			  <update>
			     <value>
			     	update tbl_department(@{deptno},@{deptname},@{manager},@{builtdate},@{performance},@{description}) where guid=@{guid};
			     	update tbl_baseinfo(@{deptno}) where deptno=@{deptno__old};
			     </value>
			  </update>
			  <delete>
			  	 delete from tbl_department where deptno=@{deptno__old};
			  </delete>
			</sql>
		</report>
		<footer>${otherdata_datepage1.footer}</footer>
	</page>
	
	<page id="otherdata_clientpage1" js="/webresources/script/validate.js,/wabacusdemo/js/demo.js">
	  <tabpanel id="tab1" titlestyle="2" margin="10">
	  		<report id="report1" title="部门信息列表" type="editablelist2" dataexport="richexcel">
				<display>
					<col column="guid" displaytype="hidden"/>
					<col column="deptno" label="部门编号" clickorderby="true" valuestyleproperty="style='mso-number-format:\@'">
						<inputbox jsvalidate="isNotEmpty(#label#列不允许为空)"/>
					</col>
					<col column="deptname" label="部门名" clickorderby="true"/>
					<col column="manager" label="部门经理"/>
					<col column="builtdate" label="创建日期" clickorderby="true" width="100px" datatype="date{yyyy-MM-dd}">
						<inputbox type="datepicker"  jsvalidate="isDate(#data#格式不对，必须为yyyy-MM-dd格式)"/>
					</col>
					<col column="performance" label="表现" clickorderby="true" width="150px" filter="true">
						<inputbox type="selectbox">
							<option value="优秀" label="优秀"/> 
							<option value="良好" label="良好" />
							<option value="较好" label="较好" />
							<option value="很差" label="很差" />
						</inputbox>
					</col>
					<col column="description" label="简介" datatype="clob">
						<inputbox type="textareabox"/>
					</col>
				</display>
				<footer>${otherdata_clientpage1.footer}</footer>
				<sql beforesave="otherdata_clientpage1_beforesave">
			  	  <select>
					<value>
						<![CDATA[SELECT * FROM tbl_department where  {#condition#} order by deptno]]>
					</value>
					<condition name="txtdeptno" label="部门编号">
						<value>
							<![CDATA[(deptno like  '%#data#%' )]]>
						</value>
						<inputbox>
					 		 <typeprompt width="200" count="15">
								<promptcol label="deptno" matchmode="anywhere"/>
								<datasource><option dataset="@{select deptno from tbl_department where {#matchcondition#}}"/></datasource>
						  	 </typeprompt>
						</inputbox>
					</condition>
			  	  </select>
			 	  <insert>
			  			<params>
			  				<param name="currentdate" value="!{testdate}" datatype="timestamp"/>
			    		</params>
			    		<value>
		  		 			insert into tbl_department(guid=uuid{},@{deptno},@{deptname},@{manager},@{builtdate},@{performance},@{description});
		  		 			insert tbl_log(uuid=uuid{},createdate=#{currentdate},content=!{logcontent},updatetype='insert');
		  				</value>
			  		</insert>
			  		<update>
			  			<params>
			  				<param name="currentdate" value="!{testdate}" datatype="timestamp"/>
			    		</params>
			     		<value>
			     			update tbl_department(@{deptno},@{deptname},@{manager},@{builtdate},@{performance},@{description}) where guid=@{guid};
			     			update tbl_baseinfo(@{deptno}) where deptno=@{deptno__old};
			     			insert tbl_log(uuid=uuid{},createdate=#{currentdate},content=!{logcontent},updatetype='update');
			     		</value>
			  		</update>
			  		<delete>
			  			<params>
			  				<param name="currentdate" value="!{testdate}" datatype="timestamp"/>
			    		</params>
			   		<value>
			  	 			delete from tbl_department where deptno=@{deptno__old};
			  	 			insert tbl_log(uuid=uuid{},createdate=#{currentdate},content=!{logcontent},updatetype='delete');
			  			</value>
			  		</delete>
				</sql>
			</report>
	  		<report id="report2" extends="otherdata_serverpage1.report2">
	  			<display>
					<col column="createdate" label="更新时间" clickorderby="true" width="150px"/>
					<col column="updatetype" label="更新类型" filter="condition{selectupdatetype}" width="120px"/>
					<col column="content" label="内容" clickorderby="true"/>
				</display>
				<footer><![CDATA[<font color='red'>如果没有找到新添加的日志，请点击一下“查询”按钮</font>]]></footer>
	  		</report>
	  </tabpanel>
	</page>
	
	<page id="otherdata_serverpage1" js="/webresources/script/validate.js">
	  <tabpanel id="tab1" titlestyle="2" margin="10">
		 <report id="report1" title="部门信息列表" type="editablelist2" dataexport="richexcel" 
				interceptor="com.wabacusdemo.Interceptor_otherdata_serverpage1">
			<display>
				<col column="guid" displaytype="hidden"/>
				<col column="deptno" label="部门编号" clickorderby="true" valuestyleproperty="style='mso-number-format:\@'">
					<inputbox jsvalidate="isNotEmpty(#label#列不允许为空)"/>
				</col>
				<col column="deptname" label="部门名" clickorderby="true"/>
				<col column="manager" label="部门经理"/>
				<col column="builtdate" label="创建日期" clickorderby="true" width="100px" datatype="date{yyyy-MM-dd}">
					<inputbox type="datepicker"  jsvalidate="isDate(#data#格式不对，必须为yyyy-MM-dd格式)"/>
				</col>
				<col column="performance" label="表现" clickorderby="true" width="150px" filter="true">
					<inputbox type="selectbox">
						<option value="优秀" label="优秀"/> 
						<option value="良好" label="良好" />
						<option value="较好" label="较好" />
						<option value="很差" label="很差" />
					</inputbox>
				</col>
				<col column="description" label="简介" datatype="clob">
					<inputbox type="textareabox"/>
				</col>
			</display>
			<footer>${otherdata_serverpage1.footer}</footer>
			<sql>
			  <select>
				<value>
					<![CDATA[SELECT * FROM tbl_department where  {#condition#} order by deptno]]>
				</value>
				<condition name="txtdeptno" label="部门编号">
					<value>
						<![CDATA[(deptno like  '%#data#%' )]]>
					</value>
					<inputbox>
					   <typeprompt width="200" count="15">
							<promptcol label="deptno" matchmode="anywhere"/>
							<datasource><option dataset="@{select deptno from tbl_department where {#matchcondition#}}"/></datasource>
					  	</typeprompt>
					</inputbox>
				</condition>
			  </select>
			  <insert>
			  	<params>
			  		<param name="currentdate" value="now{}" datatype="timestamp"/>
			    	<param name="logcontent" value=""/>
			    </params>
			    <value>
		  		 	insert into tbl_department(guid=uuid{},@{deptno},@{deptname},@{manager},@{builtdate},@{performance},@{description});
		  		 	insert tbl_log(uuid=uuid{},createdate=#{currentdate},content=#{logcontent},updatetype='insert');
		  		</value>
			  </insert>
			  <update>
			  	<params>
			  		<param name="currentdate" value="now{}" datatype="timestamp"/>
			    	<param name="logcontent" value=""/>
			    </params>
			     <value>
			     	update tbl_department(@{deptno},@{deptname},@{manager},@{builtdate},@{performance},@{description}) where guid=@{guid};
			     	update tbl_baseinfo(@{deptno}) where deptno=@{deptno__old};
			     	insert tbl_log(uuid=uuid{},createdate=#{currentdate},content=#{logcontent},updatetype='update');
			     </value>
			  </update>
			  <delete>
			  	<params>
			  		<param name="currentdate" value="now{}" datatype="timestamp"/>
			    	<param name="logcontent" value=""/>
			    </params>
			    <value>
			  	 	delete from tbl_department where deptno=@{deptno__old};
			  	 	insert tbl_log(uuid=uuid{},createdate=#{currentdate},content=#{logcontent},updatetype='delete');
			  	</value>
			  </delete>
			</sql>
		</report>
		<report id="report2" title="查看更新日志" dataexport="richexcel">
			<display>
				<col column="createdate" label="更新时间" clickorderby="true" width="150px"/>
				<col column="updatetype" label="更新类型" filter="condition{selectupdatetype}" width="120px"/>
				<col column="content" label="内容" clickorderby="true"/>
			</display>
			<sql>
			  <select>
				<value>
					<![CDATA[SELECT * FROM tbl_log where {#condition#} order by createdate desc]]>
				</value>
				<condition name="selectupdatetype" label="更新类型">
					<value>
						<![CDATA[(updatetype =  '#data#' )]]>
					</value>
					<inputbox type="selectbox">
						<option value="" label="全部"/> 
						<option value="insert" label="添加"/> 
						<option value="update" label="修改" />
						<option value="delete" label="删除" />
					</inputbox>
				</condition>
			  </select>
			</sql>
		</report>
	  </tabpanel>
	</page>
	
	<!--page id="editcommonrowgrouppage1" js="/webresources/script/validate.js,/wabacusdemo/js/testcallback.js">
		<tabpanel id="tp1" margin="10px" titlestyle="2" titlewidth="150px">
			<report id="report1" title="员工信息列表" parenttitle="分组列为普通输入框" type="editablelist2" pagesize="20" dataexport="richexcel">
				<display>
					<col column="deptname" label="所属部门" filter="true" filterwidth="120px" updatecol="@{deptno}" rowgroup="true">
						<inputbox type="selectbox" servervalidate="isNotEmpty(${invalid.isnotempty})">
							<option dataset="@{select deptno,deptname from tbl_department}" label="deptname" value="deptno"/>
						</inputbox>
					</col>
					<col column="sex" label="性别" rowgroup="true">
						<inputbox type="radiobox">
							<option value="0" label="女"/> 
							<option value="1" label="男"/>
						</inputbox>
					</col>
					<col column="deptno" label="所属部门" displaytype="hidden"/>
					<col column="no" label="工号" clickorderby="true" valuestyleproperty="style='mso-number-format:\@' width='10%'">
						<inputbox jsvalidate="isNotEmpty(${invalid.isnotempty})"/>
					</col>
					<col column="name" label="姓名" clickorderby="true" width="15%"/>
					<group label="基本信息">
						<col column="age" label="年龄" clickorderby="true" width="100px" filter="true" filterwidth="120px">
							<inputbox jsvalidate="isNotEmpty(${invalid.isnotempty});isNumeric(#data#不是合法数字)"/>
						</col>
						<col column="birthday" label="出生日期" clickorderby="true" width="150px" datatype="date{yyyy-MM-dd}">
							<inputbox type="datepicker"  jsvalidate="isNotEmpty(${invalid.isnotempty});isDate(#data#格式不对，必须为yyyy-MM-dd格式)"/>
						</col>
					</group>
					<col column="salary" label="工资" datatype="float">
						<inputbox jsvalidate="isNotEmpty(${invalid.isnotempty})"/>
					</col>
					<group label="籍贯">
						<col column="province" label="省">
							<inputbox type="selectbox" servervalidate="isNotEmpty(${invalid.isnotempty})">
								<option dataset="@{select distinct province from tbl_area}" label="province" value="province"/>
							</inputbox>
						</col>
						<col column="city" label="市">
							<inputbox type="selectbox" depends="province" servervalidate="isNotEmpty(${invalid.isnotempty})">
								<option dataset="@{select distinct city from tbl_area where province like '%#province#%'}" label="city" value="city"/>
							</inputbox>
						</col>
						<col column="county" label="县">
							<inputbox type="selectbox" depends="city" servervalidate="isNotEmpty(${invalid.isnotempty})">
								<option dataset="@{select distinct county from tbl_area where city like '%#city#%'}" label="county" value="county"/>
							</inputbox>
						</col>
					</group>
				</display>
				<sql>
				  <select>
					<value>
						<![CDATA[SELECT A.no,name,sex,age,birthday,salary,A.deptno,deptname,province,city,county FROM tbl_baseinfo A left join tbl_department B on A.deptno=B.deptno left join tbl_detailinfo C on A.no=C.no where {#condition#} order by no]]>
					</value>
					<condition name="txtno" label="工号">
						<value>
							<![CDATA[(A.no like  '%#data#%' )]]>
						</value>
						<inputbox>
						  <typeprompt width="-1" count="15">
								<promptcol label="no" matchmode="anywhere"/>
								<datasource><option dataset="@{select no from tbl_baseinfo where {#matchcondition#}}"/></datasource>
						  </typeprompt>
						</inputbox>
					</condition>
					<condition name="txtname" label="姓名">
						<value>
							<![CDATA[(name like  '%#data#%' )]]>
						</value>
					</condition>
				  </select>
				  <insert>
			  		 insert into tbl_baseinfo(uuid=uuid{},@{no},@{name},@{sex},@{age},@{birthday},@{deptno});
			  		 insert into tbl_detailinfo(@{no},@{salary},@{province},@{city},@{county});
				  </insert>
				  <update>
				     update tbl_baseinfo(@{no},@{name},@{sex},@{age},@{birthday},@{deptno}) where no=@{no__old};
				     update tbl_detailinfo(@{no},@{salary},@{province},@{city},@{county}) where no=@{no__old};
				  </update>
				  <delete>
				  	 delete from tbl_baseinfo where no=@{no__old};
				  	 delete from tbl_detailinfo where no=@{no__old}
				  </delete>
				</sql>
			    <format>
				  <value>
						sex=sex==null?"":sex.trim();
						if(sex.equals("0")) sex="女";
						else if(sex.equals("1")) sex="男";
				  </value>
				</format>
			</report>
			<report id="report2" title="员工信息列表" parenttitle="分组列为关联下拉框" extends="editcommonrowgrouppage1.report1">
				<display>
					<group label="籍贯">
						<col column="province" label="省" rowgroup="true">
							<inputbox type="selectbox" servervalidate="isNotEmpty(${invalid.isnotempty})">
								<option dataset="@{select distinct province from tbl_area}" label="province" value="province"/>
							</inputbox>
						</col>
						<col column="city" label="市" rowgroup="true">
							<inputbox type="selectbox" depends="province" servervalidate="isNotEmpty(${invalid.isnotempty})">
								<option dataset="@{select distinct city from tbl_area where province like '%#province#%'}" label="city" value="city"/>
							</inputbox>
						</col>
						<col column="county" label="县" rowgroup="true">
							<inputbox type="selectbox" depends="city" servervalidate="isNotEmpty(${invalid.isnotempty})">
								<option dataset="@{select distinct county from tbl_area where city like '%#city#%'}" label="county" value="county"/>
							</inputbox>
						</col>
					</group>
					<col column="no" label="工号" clickorderby="true" valuestyleproperty="style='mso-number-format:\@' width='10%'">
						<inputbox jsvalidate="isNotEmpty(${invalid.isnotempty})"/>
					</col>
					<col column="name" label="姓名" clickorderby="true" width="15%"/>
					<group label="基本信息">
						<col column="sex" label="性别">
							<inputbox type="radiobox">
								<option value="0" label="女"/> 
								<option value="1" label="男"/>
							</inputbox>
						</col>
						<col column="age" label="年龄" clickorderby="true" width="100px" filter="true" filterwidth="120px">
							<inputbox jsvalidate="isNotEmpty(${invalid.isnotempty});isNumeric(#data#不是合法数字)"/>
						</col>
						<col column="birthday" label="出生日期" clickorderby="true" width="150px" datatype="date{yyyy-MM-dd}">
							<inputbox type="datepicker"  jsvalidate="isNotEmpty(${invalid.isnotempty});isDate(#data#格式不对，必须为yyyy-MM-dd格式)"/>
						</col>
					</group>
					<col column="salary" label="工资" datatype="float">
						<inputbox jsvalidate="isNotEmpty(${invalid.isnotempty})"/>
					</col>
					<col column="deptno" label="所属部门" displaytype="hidden"/>
					<col column="deptname" label="所属部门" filter="true" filterwidth="120px" updatecol="@{deptno}">
						<inputbox type="selectbox" servervalidate="isNotEmpty(${invalid.isnotempty})">
							<option dataset="@{select deptno,deptname from tbl_department}" label="deptname" value="deptno"/>
						</inputbox>
					</col>
				</display>
			</report>
		</tabpanel>
	</page-->
	
	<page id="editcommonrowgrouppage2" js="/webresources/script/validate.js,/wabacusdemo/js/testcallback.js">
		<report id="report1" title="员工信息列表"  type="editablelist">
			<display>
				<group label="籍贯">
					<col column="province" label="省" rowgroup="true">
						<inputbox type="selectbox" servervalidate="isNotEmpty(${invalid.isnotempty})">
							<option dataset="@{select distinct province from tbl_area}" label="province" value="province"/>
						</inputbox>
					</col>
					<col column="city" label="市" rowgroup="true">
						<inputbox type="selectbox" depends="province" servervalidate="isNotEmpty(${invalid.isnotempty})">
							<option dataset="@{select distinct city from tbl_area where province like '%#province#%'}" label="city" value="city"/>
						</inputbox>
					</col>
					<col column="county" label="县" rowgroup="true">
						<inputbox type="selectbox" depends="city" servervalidate="isNotEmpty(${invalid.isnotempty})">
							<option dataset="@{select distinct county from tbl_area where city like '%#city#%'}" label="county" value="county"/>
						</inputbox>
					</col>
				</group>
				<col column="no" label="工号" clickorderby="true" valuestyleproperty="style='mso-number-format:\@' width='10%'">
					<inputbox jsvalidate="isNotEmpty(${invalid.isnotempty})"/>
				</col>
				<col column="name" label="姓名" clickorderby="true" width="15%"/>
				<group label="基本信息">
					<col column="sex" label="性别">
						<inputbox type="radiobox">
							<option value="0" label="女"/> 
							<option value="1" label="男"/>
						</inputbox>
					</col>
					<col column="age" label="年龄" clickorderby="true" width="100px" filter="true" filterwidth="120px">
						<inputbox jsvalidate="isNotEmpty(${invalid.isnotempty});isNumeric(#data#不是合法数字)"/>
					</col>
					<col column="birthday" label="出生日期" clickorderby="true" width="150px" datatype="date{yyyy-MM-dd}">
						<inputbox type="datepicker"  jsvalidate="isNotEmpty(${invalid.isnotempty});isDate(#data#格式不对，必须为yyyy-MM-dd格式)"/>
					</col>
				</group>
				<col column="salary" label="工资" datatype="float">
					<inputbox jsvalidate="isNotEmpty(${invalid.isnotempty})"/>
				</col>
				<col column="deptno" label="所属部门" displaytype="hidden"/>
				<col column="deptname" label="所属部门" filter="true" filterwidth="120px" updatecol="@{deptno}">
					<inputbox type="selectbox" servervalidate="isNotEmpty(${invalid.isnotempty})">
						<option dataset="@{select deptno,deptname from tbl_department}" label="deptname" value="deptno"/>
					</inputbox>
				</col>
			</display>
			<sql>
			  	<select>
					<value>
						<![CDATA[SELECT A.no,name,sex,age,birthday,salary,A.deptno,deptname,province,city,county FROM tbl_baseinfo A left join tbl_department B on A.deptno=B.deptno left join tbl_detailinfo C on A.no=C.no
						 where {#condition#} order by province,city,county,no]]>
					</value>
					<condition name="txtno" label="工号">
						<value>
							<![CDATA[(A.no like  '%#data#%' )]]>
						</value>
						<inputbox>
						  <typeprompt width="-1" count="15">
								<promptcol label="no" matchmode="anywhere"/>
								<datasource><option dataset="@{select no from tbl_baseinfo where {#matchcondition#}}"/></datasource>
						  </typeprompt>
						</inputbox>
					</condition>
					<condition name="txtname" label="姓名">
						<value>
							<![CDATA[(name like  '%#data#%' )]]>
						</value>
					</condition>
				</select>
				<insert pageurl="report{detailformpage1.report1}" pageinitsize="max"/>
				<update pageurl="report{detailformpage1.report1}" urlparams="txtgonghao=@{no}" pageinitsize="max"/>
				<delete>
				  	delete from tbl_baseinfo where no=@{no__old};
				  	delete from tbl_detailinfo where no=@{no__old}
				</delete>
			</sql>
			<format>
			  <value>
					sex=sex==null?"":sex.trim();
					if(sex.equals("0")) sex="女";
					else if(sex.equals("1")) sex="男";
			  </value>
			</format>
		</report>
	</page>
	
	<!--page id="editcommontreerowgrouppage1" js="/webresources/script/validate.js,/wabacusdemo/js/testcallback.js">
		<tabpanel id="tp1" margin="10px" titlestyle="2" titlewidth="150px">
			<report id="report1" title="员工信息列表" parenttitle="分组列为普通输入框" type="editablelist2" pagesize="20" dataexport="richexcel">
				<display>
					<col column="deptname" label="所属部门" filter="true" filterwidth="120px" width="15%"
						 updatecol="@{deptno}" treerowgroup="true">
						<inputbox type="selectbox" servervalidate="isNotEmpty(${invalid.isnotempty})">
							<option dataset="@{select deptno,deptname from tbl_department}" label="deptname" value="deptno"/>
						</inputbox>
					</col>
					<col column="sex" label="性别" treerowgroup="true">
						<inputbox type="radiobox">
							<option value="0" label="女"/> 
							<option value="1" label="男"/>
						</inputbox>
					</col>
					<col column="deptno" label="所属部门" displaytype="hidden"/>
					<col column="no" label="工号" clickorderby="true" valuestyleproperty="style='mso-number-format:\@' width='10%'">
						<inputbox jsvalidate="isNotEmpty(${invalid.isnotempty})"/>
					</col>
					<col column="name" label="姓名" clickorderby="true" width="15%"/>
					<group label="基本信息">
						<col column="age" label="年龄" clickorderby="true" width="100px" filter="true" filterwidth="120px">
							<inputbox jsvalidate="isNotEmpty(${invalid.isnotempty});isNumeric(#data#不是合法数字)"/>
						</col>
						<col column="birthday" label="出生日期" clickorderby="true" width="150px" datatype="date{yyyy-MM-dd}">
							<inputbox type="datepicker"  jsvalidate="isNotEmpty(${invalid.isnotempty});isDate(#data#格式不对，必须为yyyy-MM-dd格式)"/>
						</col>
					</group>
					<col column="salary" label="工资" datatype="float">
						<inputbox jsvalidate="isNotEmpty(${invalid.isnotempty})"/>
					</col>
					<group label="籍贯">
						<col column="province" label="省">
							<inputbox type="selectbox" servervalidate="isNotEmpty(${invalid.isnotempty})">
								<option dataset="@{select distinct province from tbl_area}" label="province" value="province"/>
							</inputbox>
						</col>
						<col column="city" label="市">
							<inputbox type="selectbox" depends="province" servervalidate="isNotEmpty(${invalid.isnotempty})">
								<option dataset="@{select distinct city from tbl_area where province like '%#province#%'}" label="city" value="city"/>
							</inputbox>
						</col>
						<col column="county" label="县">
							<inputbox type="selectbox" depends="city" servervalidate="isNotEmpty(${invalid.isnotempty})">
								<option dataset="@{select distinct county from tbl_area where city like '%#city#%'}" label="county" value="county"/>
							</inputbox>
						</col>
					</group>
				</display>
				<sql>
				  <select>
					<value>
						<![CDATA[SELECT A.no,name,sex,age,birthday,salary,A.deptno,deptname,province,city,county FROM tbl_baseinfo A left join tbl_department B on A.deptno=B.deptno left join tbl_detailinfo C on A.no=C.no where {#condition#} order by no desc]]>
					</value>
					<condition name="txtno" label="工号">
						<value>
							<![CDATA[(A.no like  '%#data#%' )]]>
						</value>
						<inputbox>
						  <typeprompt width="-1" count="15">
								<promptcol label="no" matchmode="anywhere"/>
								<datasource><option dataset="@{select no from tbl_baseinfo where {#matchcondition#}}"/></datasource>
						  </typeprompt>
						</inputbox>
					</condition>
					<condition name="txtname" label="姓名">
						<value>
							<![CDATA[(name like  '%#data#%' )]]>
						</value>
					</condition>
				  </select>
				  <update>
				     update tbl_baseinfo(@{no},@{name},@{sex},@{age},@{birthday},@{deptno}) where no=@{no__old};
				     update tbl_detailinfo(@{no},@{salary},@{province},@{city},@{county}) where no=@{no__old};
				  </update>
				  <delete>
				  	 delete from tbl_baseinfo where no=@{no__old};
				  	 delete from tbl_detailinfo where no=@{no__old}
				  </delete>
				</sql>
			    <format>
				  <value>
						sex=sex==null?"":sex.trim();
						if(sex.equals("0")) sex="女";
						else if(sex.equals("1")) sex="男";
				  </value>
				</format>
			</report>
			<report id="report2" title="员工信息列表" parenttitle="分组列为关联下拉框" extends="editcommontreerowgrouppage1.report1" contextmenu="false">
				<display>
					<col column="province" label="地区" treerowgroup="true" width="15%">
						<inputbox type="selectbox" servervalidate="isNotEmpty(${invalid.isnotempty})">
							<option dataset="@{select distinct province from tbl_area}" label="province" value="province"/>
						</inputbox>
					</col>
					<col column="city" label="市" treerowgroup="true">
						<inputbox type="selectbox" depends="province" servervalidate="isNotEmpty(${invalid.isnotempty})">
							<option dataset="@{select distinct city from tbl_area where province like '%#province#%'}" label="city" value="city"/>
						</inputbox>
					</col>
					<col column="county" label="县" treerowgroup="true">
						<inputbox type="selectbox" depends="city" servervalidate="isNotEmpty(${invalid.isnotempty})">
							<option dataset="@{select distinct county from tbl_area where city like '%#city#%'}" label="county" value="county"/>
						</inputbox>
					</col>
					<col column="no" label="工号" clickorderby="true" valuestyleproperty="style='mso-number-format:\@' width='10%'">
						<inputbox jsvalidate="isNotEmpty(${invalid.isnotempty})"/>
					</col>
					<col column="name" label="姓名" clickorderby="true" width="15%"/>
					<group label="基本信息">
						<col column="sex" label="性别">
							<inputbox type="radiobox">
								<option value="0" label="女"/> 
								<option value="1" label="男"/>
							</inputbox>
						</col>
						<col column="age" label="年龄" clickorderby="true" width="100px" filter="true" filterwidth="120px">
							<inputbox jsvalidate="isNotEmpty(${invalid.isnotempty});isNumeric(#data#不是合法数字)"/>
						</col>
						<col column="birthday" label="出生日期" clickorderby="true" width="150px" datatype="date{yyyy-MM-dd}">
							<inputbox type="datepicker"  jsvalidate="isNotEmpty(${invalid.isnotempty});isDate(#data#格式不对，必须为yyyy-MM-dd格式)"/>
						</col>
					</group>
					<col column="salary" label="工资" datatype="float">
						<inputbox jsvalidate="isNotEmpty(${invalid.isnotempty})"/>
					</col>
					<col column="deptno" label="所属部门" displaytype="hidden"/>
					<col column="deptname" label="所属部门" filter="true" filterwidth="120px" updatecol="@{deptno}">
						<inputbox type="selectbox" servervalidate="isNotEmpty(${invalid.isnotempty})">
							<option dataset="@{select deptno,deptname from tbl_department}" label="deptname" value="deptno"/>
						</inputbox>
					</col>
				</display>
			</report>
		</tabpanel>
	</page-->
	
	<page id="editcommontreerowgrouppage2" js="/webresources/script/validate.js,/wabacusdemo/js/testcallback.js">
		<report id="report1" title="员工信息列表" type="editablelist">
			<display>
				<col column="province" label="地区" treerowgroup="true" width="15%">
					<inputbox type="selectbox" servervalidate="isNotEmpty(${invalid.isnotempty})">
						<option dataset="@{select distinct province from tbl_area}" label="province" value="province"/>
					</inputbox>
				</col>
				<col column="city" label="市" treerowgroup="true">
					<inputbox type="selectbox" depends="province" servervalidate="isNotEmpty(${invalid.isnotempty})">
						<option dataset="@{select distinct city from tbl_area where province like '%#province#%'}" label="city" value="city"/>
					</inputbox>
				</col>
				<col column="county" label="县" treerowgroup="true">
					<inputbox type="selectbox" depends="city" servervalidate="isNotEmpty(${invalid.isnotempty})">
						<option dataset="@{select distinct county from tbl_area where city like '%#city#%'}" label="county" value="county"/>
					</inputbox>
				</col>
				<col column="no" label="工号" clickorderby="true" valuestyleproperty="style='mso-number-format:\@' width='10%'">
					<inputbox jsvalidate="isNotEmpty(${invalid.isnotempty})"/>
				</col>
				<col column="name" label="姓名" clickorderby="true" width="15%"/>
				<group label="基本信息">
					<col column="sex" label="性别">
						<inputbox type="radiobox">
							<option value="0" label="女"/> 
							<option value="1" label="男"/>
						</inputbox>
					</col>
					<col column="age" label="年龄" clickorderby="true" width="100px" filter="true" filterwidth="120px">
						<inputbox jsvalidate="isNotEmpty(${invalid.isnotempty});isNumeric(#data#不是合法数字)"/>
					</col>
					<col column="birthday" label="出生日期" clickorderby="true" width="150px" datatype="date{yyyy-MM-dd}">
						<inputbox type="datepicker"  jsvalidate="isNotEmpty(${invalid.isnotempty});isDate(#data#格式不对，必须为yyyy-MM-dd格式)"/>
					</col>
				</group>
				<col column="salary" label="工资" datatype="float">
					<inputbox jsvalidate="isNotEmpty(${invalid.isnotempty})"/>
				</col>
				<col column="deptno" label="所属部门" displaytype="hidden"/>
				<col column="deptname" label="所属部门" filter="true" filterwidth="120px" updatecol="@{deptno}">
					<inputbox type="selectbox" servervalidate="isNotEmpty(${invalid.isnotempty})">
						<option dataset="@{select deptno,deptname from tbl_department}" label="deptname" value="deptno"/>
					</inputbox>
				</col>
			</display>
			<sql>
			  <select>
					<value>
						<![CDATA[SELECT A.no,name,sex,age,birthday,salary,A.deptno,deptname,province,city,county FROM tbl_baseinfo A left join tbl_department B on A.deptno=B.deptno left join tbl_detailinfo C on A.no=C.no 
						where {#condition#} order by province,city,county,no]]>
					</value>
					<condition name="txtno" label="工号">
						<value>
							<![CDATA[(A.no like  '%#data#%' )]]>
						</value>
						<inputbox>
						  <typeprompt width="-1" count="15">
								<promptcol label="no" matchmode="anywhere"/>
								<datasource><option dataset="@{select no from tbl_baseinfo where {#matchcondition#}}"/></datasource>
						  </typeprompt>
						</inputbox>
					</condition>
					<condition name="txtname" label="姓名">
						<value>
							<![CDATA[(name like  '%#data#%' )]]>
						</value>
					</condition>
			   </select>
			   <insert pageurl="report{detailformpage1.report1}" pageinitsize="max"/>
				<update pageurl="report{detailformpage1.report1}" urlparams="txtgonghao=@{no}" pageinitsize="max"/>
				<delete>
				  	delete from tbl_baseinfo where no=@{no__old};
				  	delete from tbl_detailinfo where no=@{no__old}
				</delete>
			</sql>
			<format>
			  <value>
					sex=sex==null?"":sex.trim();
					if(sex.equals("0")) sex="女";
					else if(sex.equals("1")) sex="男";
			  </value>
			</format>
		</report>
	</page>
	
	
	<page id="savemultireports_staticpage1" js="/webresources/script/validate.js">
		<report id="report1" extends="editablelistreportpage1.report1">
			<sql savebinding="report2;report3">
			  <select>
				<value>
					<![CDATA[SELECT * FROM tbl_department where  {#condition#} order by deptno]]>
				</value>
				<condition name="txtdeptno" label="部门编号">
					<value>
						<![CDATA[(deptno like  '%#data#%' )]]>
					</value>
					<inputbox>
					   <typeprompt width="200" count="15">
							<promptcol label="deptno" matchmode="anywhere"/>
							<datasource><option dataset="@{select deptno from tbl_department where {#matchcondition#}}"/></datasource>
					  	</typeprompt>
					</inputbox>
				</condition>
			  </select>
			  <insert>
		  		 insert into tbl_department(guid=uuid{},@{deptno},@{deptname},@{manager},@{builtdate},@{performance});
			  </insert>
			  <update>
			     update tbl_department(@{deptno},@{deptname},@{manager},@{builtdate},@{performance}) where guid=@{guid};
			     update tbl_baseinfo(@{deptno}) where deptno=@{deptno__old};
			  </update>
			  <delete>
			  	 delete from tbl_department where deptno=@{deptno__old};
			  </delete>
			</sql>
		</report>
		<report id="report2" extends="clientsavecallback_beforepage1.report1"  top="15px"
				depends="report1" dependsparams="txtreport2_deptno=@{deptno}">
			<sql>
			  <select>
				<value>
					<![CDATA[SELECT A.no,name,sex,age,birthday,salary,A.deptno,deptname,province,city,county FROM tbl_baseinfo A left join tbl_department B on A.deptno=B.deptno left join tbl_detailinfo C on A.no=C.no where {#condition#} order by no]]>
				</value>
				<condition name="txtno" label="工号">
					<value>
						<![CDATA[(A.no like  '%#data#%' )]]>
					</value>
					<inputbox>
					  <typeprompt width="-1" count="15">
							<promptcol label="no" matchmode="anywhere"/>
							<datasource><option dataset="@{select no from tbl_baseinfo where {#matchcondition#}}"/></datasource>
					  </typeprompt>
					</inputbox>
				</condition>
				<condition name="txtname" label="姓名">
					<value>
						<![CDATA[(name like  '%#data#%' )]]>
					</value>
				</condition>
				<condition name="txtreport2_deptno" label="部门编号" hidden="true">
					<value>
						<![CDATA[(A.deptno like  '%#data#%' )]]>
					</value>
				</condition>
			  </select>
			  <insert>
			  	<params>
			  		<param name="e_deptno" value="url{txtreport2_deptno}"/>
			  	</params>
			  	<value>
		  		 	insert into tbl_baseinfo(uuid=uuid{},@{no},@{name},@{sex},@{age},@{birthday},deptno=#{e_deptno});
		  		 	insert into tbl_detailinfo(@{no},@{salary},@{province},@{city},@{county});
		  		</value>
			  </insert>
			  <update>
			  	<params>
			  		<param name="e_deptno" value="url{txtreport2_deptno}"/>
			  	</params>
			  	<value>
			     	update tbl_baseinfo(@{no},@{name},@{sex},@{age},@{birthday},deptno=#{e_deptno}) where no=@{no__old};
			    </value>
			  </update>
			  <delete>
			  	 delete from tbl_baseinfo where no=@{no__old};
			  	 delete from tbl_detailinfo where no=@{no__old}
			  </delete>
			</sql>
		    <format>
			  <value>
					sex=sex==null?"":sex.trim();
					if(sex.equals("0")) sex="女";
					else if(sex.equals("1")) sex="男";
			  </value>
			</format>
		</report>
		<report id="report3" title="request{employeename}详细资料" type="editabledetail2" top="15px">
			<display valuetdwidth="100px" labeltdwidth="71px" labelbgcolor="#f0f0f0" labelalign="right" valuealign="left">
				<col column="no" label="工号"  valuestyleproperty="style='mso-number-format:\@'">
					<inputbox jsvalidate="isNotEmpty(${invalid.isnotempty})"/>
				</col>
				<col column="name" label="中文名"/>
				<col column="ename" label="英文名*" br="true"/>
				<col column="sex" label="性别">
					<inputbox type="radiobox">
						<option value="0" label="女"/> 
						<option value="1" label="男"/>
					</inputbox>
				</col>
				<col column="age" label="年龄">
					<inputbox jsvalidate="isNotEmpty(${invalid.isnotempty});isNumeric(#data#不是合法数字)"/>
				</col>
				<col column="marriage" label="婚姻状况*" br="true">
					<inputbox type="selectbox">
						<option value="0" label="未婚"/> 
						<option value="1" label="已婚"/>
					</inputbox>
				</col>
				<col column="salary" label="工资*" datatype="float">
					<inputbox jsvalidate="isNotEmpty(${invalid.isnotempty})"/>
				</col>
				<col column="deptno" label="所属部门" displaytype="hidden"/>
				<col column="deptname" label="所属部门" updatecol="@{deptno}" valuestyleproperty="colspan='3'" br="true">
					<inputbox type="selectbox" servervalidate="isNotEmpty(${invalid.isnotempty})">
						<option dataset="@{select deptno,deptname from tbl_department}" label="deptname" value="deptno"/>
					</inputbox>
				</col>
				<col column="birthday" label="出生日期" datatype="date{yyyy-MM-dd}" valuestyleproperty="colspan='2'">
					<inputbox type="datepicker"  jsvalidate="isNotEmpty(${invalid.isnotempty});isDate(#data#格式不对，必须为yyyy-MM-dd格式)"/>
				</col>
				<col column="joinindate" label="入职日期*" datatype="date{MM/dd/yyyy}" valuestyleproperty="colspan='2'" br="true">
					<inputbox type="datepicker" dateformat="MM/dd/yyyy"/>
				</col>
				<col column="province" label="省*">
					<inputbox type="selectbox" servervalidate="isNotEmpty(${invalid.isnotempty})">
						<option dataset="@{select distinct province from tbl_area}" label="province" value="province"/>
					</inputbox>
				</col>
				<col column="city" label="市*">
					<inputbox type="selectbox" depends="province" servervalidate="isNotEmpty(${invalid.isnotempty})">
						<option dataset="@{select distinct city from tbl_area where province like '%#province#%'}" label="city" value="city"/>
					</inputbox>
				</col>
				<col column="county" label="县*" br="true">
					<inputbox type="selectbox" depends="city" servervalidate="isNotEmpty(${invalid.isnotempty})">
						<option dataset="@{select distinct county from tbl_area where city like '%#city#%'}" label="county" value="county"/>
					</inputbox>
				</col>
				<col column="description" label="评价*" datatype="clob" valuestyleproperty="colspan='5'">
					<inputbox type="textareabox" styleproperty="rows='5'"/>
				</col>
			</display>
			<sql>
			  <select>
				<value>
					<![CDATA[SELECT A.no,name,ename,sex,age,marriage,salary,A.deptno,deptname,birthday,joinindate,province,city,county,B.description FROM tbl_baseinfo A left join tbl_detailinfo B  on A.no=B.no left join tbl_department C on A.deptno=C.deptno where {#condition#}]]>
				</value>
				<condition name="txtgonghao" label="工号">
					<value>
						<![CDATA[(A.no = '#data#' )]]>
					</value>
				</condition>
			  </select>
			   <update>
			     update tbl_detailinfo(@{ename},@{salary},@{marriage},@{joinindate},@{province},@{city},@{county},@{description}) where no=@{no__old};
			  </update>
			</sql>
			<format>
			  <value>
			  		rrequest.getRequest().setAttribute("employeename",name);//存放request，以便显示标题时能取到
					sex=sex==null?"":sex.trim();
					if(sex.equals("0")) sex="女";
					else if(sex.equals("1")) sex="男";
					marriage=marriage==null?"":marriage.trim();
					if(marriage.equals("1")) marriage="已婚";
					else if(marriage.equals("0")) marriage="未婚";
			  </value>
			</format>
		</report>
		<footer>说明：标*号的可以编辑</footer>
	</page>	
	
	<page id="savemultireports_tagpage1" js="/webresources/script/validate.js">
		<report id="report1" extends="editablelistreportpage1.report1" template="/wabacusdemo/jsp/tagpages/savemultireports_tagpage1_report1.jsp">
			<sql>
			  <select>
				<value>
					<![CDATA[SELECT * FROM tbl_department where  {#condition#} order by deptno]]>
				</value>
				<condition name="txtdeptno" label="部门编号">
					<value>
						<![CDATA[(deptno like  '%#data#%' )]]>
					</value>
					<inputbox>
					   <typeprompt width="200" count="15">
							<promptcol label="deptno" matchmode="anywhere"/>
							<datasource><option dataset="@{select deptno from tbl_department where {#matchcondition#}}"/></datasource>
					  	</typeprompt>
					</inputbox>
				</condition>
			  </select>
			  <insert>
		  		 insert into tbl_department(guid=uuid{},@{deptno},@{deptname},@{manager},@{builtdate},@{performance});
			  </insert>
			  <update>
			     update tbl_department(@{deptno},@{deptname},@{manager},@{builtdate},@{performance}) where guid=@{guid};
			     update tbl_baseinfo(@{deptno}) where deptno=@{deptno__old};
			  </update>
			  <delete>
			  	 delete from tbl_department where deptno=@{deptno__old};
			  </delete>
			</sql>
		</report>
		<report id="report2" extends="clientsavecallback_beforepage1.report1"  top="15px"
				depends="report1" dependsparams="txtreport2_deptno=@{deptno}">
			<sql>
			  <select>
				<value>
					<![CDATA[SELECT A.no,name,sex,age,birthday,salary,A.deptno,deptname,province,city,county FROM tbl_baseinfo A left join tbl_department B on A.deptno=B.deptno left join tbl_detailinfo C on A.no=C.no where {#condition#} order by no]]>
				</value>
				<condition name="txtno" label="工号">
					<value>
						<![CDATA[(A.no like  '%#data#%' )]]>
					</value>
					<inputbox>
					  <typeprompt width="-1" count="15">
							<promptcol label="no" matchmode="anywhere"/>
							<datasource><option dataset="@{select no from tbl_baseinfo where {#matchcondition#}}"/></datasource>
					  </typeprompt>
					</inputbox>
				</condition>
				<condition name="txtname" label="姓名">
					<value>
						<![CDATA[(name like  '%#data#%' )]]>
					</value>
				</condition>
				<condition name="txtreport2_deptno" label="部门编号" hidden="true">
					<value>
						<![CDATA[(A.deptno like  '%#data#%' )]]>
					</value>
				</condition>
			  </select>
			  <insert>
			  	<params>
			  		<param name="e_deptno" value="url{txtreport2_deptno}"/>
			  	</params>
			  	<value>
		  		 	insert into tbl_baseinfo(uuid=uuid{},@{no},@{name},@{sex},@{age},@{birthday},deptno=#{e_deptno});
		  		 	insert into tbl_detailinfo(@{no},@{salary},@{province},@{city},@{county});
		  		</value>
			  </insert>
			  <update>
			  	<params>
			  		<param name="e_deptno" value="url{txtreport2_deptno}"/>
			  	</params>
			  	<value>
			     	update tbl_baseinfo(@{no},@{name},@{sex},@{age},@{birthday},deptno=#{e_deptno}) where no=@{no__old};
			    </value>
			  </update>
			  <delete>
			  	 delete from tbl_baseinfo where no=@{no__old};
			  	 delete from tbl_detailinfo where no=@{no__old}
			  </delete>
			</sql>
		    <format>
			  <value>
					sex=sex==null?"":sex.trim();
					if(sex.equals("0")) sex="女";
					else if(sex.equals("1")) sex="男";
			  </value>
			</format>
		</report>
		<report id="report3" extends="savemultireports_staticpage1.report3"/>
	</page>	
	<page id="savemultireports_jspage1" js="/webresources/script/validate.js">
		<report id="report1" extends="editablelistreportpage1.report1">
			<sql>
			  <select>
				<value>
					<![CDATA[SELECT * FROM tbl_department where  {#condition#} order by deptno]]>
				</value>
				<condition name="txtdeptno" label="部门编号">
					<value>
						<![CDATA[(deptno like  '%#data#%' )]]>
					</value>
					<inputbox>
					   <typeprompt width="200" count="15">
							<promptcol label="deptno" matchmode="anywhere"/>
							<datasource><option dataset="@{select deptno from tbl_department where {#matchcondition#}}"/></datasource>
					  	</typeprompt>
					</inputbox>
				</condition>
			  </select>
			  <insert>
		  		 insert into tbl_department(guid=uuid{},@{deptno},@{deptname},@{manager},@{builtdate},@{performance});
			  </insert>
			  <update>
			     update tbl_department(@{deptno},@{deptname},@{manager},@{builtdate},@{performance}) where guid=@{guid};
			     update tbl_baseinfo(@{deptno}) where deptno=@{deptno__old};
			  </update>
			  <delete>
			  	 delete from tbl_department where deptno=@{deptno__old};
			  </delete>
			</sql>
			<buttons buttonspacing="2">
				<button name="button1" position="title" label="绑定保存三个报表">
					saveEditableReportData({pageid:'savemultireports_jspage1',savingReportIds:[{reportid:'report1',updatetype:'save'},{reportid:'report2',updatetype:'save'},{reportid:'report3',updatetype:'save'}]});
				</button>
				<button name="button2" position="title" label="绑定保存report1和report2报表">
					saveEditableReportData({pageid:'savemultireports_jspage1',savingReportIds:[{reportid:'report1',updatetype:'save'},{reportid:'report2',updatetype:'save'}]});
				</button>
				<button name="button3" position="title" label="绑定保存report1和report3报表">
					saveEditableReportData({pageid:'savemultireports_jspage1',savingReportIds:[{reportid:'report1',updatetype:'save'},{reportid:'report3',updatetype:'save'}]});
				</button>
				<button name="button4" position="title" label="绑定保存report2和report3报表">
					saveEditableReportData({pageid:'savemultireports_jspage1',savingReportIds:[{reportid:'report2',updatetype:'save'},{reportid:'report3',updatetype:'save'}]});
				</button>
			</buttons>
		</report>
		<report id="report2" extends="clientsavecallback_beforepage1.report1"  top="15px"
				depends="report1" dependsparams="txtreport2_deptno=@{deptno}">
			<sql>
			  <select>
				<value>
					<![CDATA[SELECT A.no,name,sex,age,birthday,salary,A.deptno,deptname,province,city,county FROM tbl_baseinfo A left join tbl_department B on A.deptno=B.deptno left join tbl_detailinfo C on A.no=C.no where {#condition#} order by no]]>
				</value>
				<condition name="txtno" label="工号">
					<value>
						<![CDATA[(A.no like  '%#data#%' )]]>
					</value>
					<inputbox>
					  <typeprompt width="-1" count="15">
							<promptcol label="no" matchmode="anywhere"/>
							<datasource><option dataset="@{select no from tbl_baseinfo where {#matchcondition#}}"/></datasource>
					  </typeprompt>
					</inputbox>
				</condition>
				<condition name="txtname" label="姓名">
					<value>
						<![CDATA[(name like  '%#data#%' )]]>
					</value>
				</condition>
				<condition name="txtreport2_deptno" label="部门编号" hidden="true">
					<value>
						<![CDATA[(A.deptno like  '%#data#%' )]]>
					</value>
				</condition>
			  </select>
			  <insert>
			  	<params>
			  		<param name="e_deptno" value="url{txtreport2_deptno}"/>
			  	</params>
			  	<value>
		  		 	insert into tbl_baseinfo(uuid=uuid{},@{no},@{name},@{sex},@{age},@{birthday},deptno=#{e_deptno});
		  		 	insert into tbl_detailinfo(@{no},@{salary},@{province},@{city},@{county});
		  		</value>
			  </insert>
			  <update>
			  	<params>
			  		<param name="e_deptno" value="url{txtreport2_deptno}"/>
			  	</params>
			  	<value>
			     	update tbl_baseinfo(@{no},@{name},@{sex},@{age},@{birthday},deptno=#{e_deptno}) where no=@{no__old};
			    </value>
			  </update>
			  <delete>
			  	 delete from tbl_baseinfo where no=@{no__old};
			  	 delete from tbl_detailinfo where no=@{no__old}
			  </delete>
			</sql>
		    <format>
			  <value>
					sex=sex==null?"":sex.trim();
					if(sex.equals("0")) sex="女";
					else if(sex.equals("1")) sex="男";
			  </value>
			</format>
		</report>
		<report id="report3" extends="savemultireports_staticpage1.report3"/>
	</page>
	<page id="multidatasourcepage1" js="/webresources/script/validate.js">
		<report id="report1" title="部门信息列表" type="editablelist2" dataexport="richexcel|plainexcel|word">
			<display>
				<col column="guid" displaytype="hidden"/>
				<col column="deptno" label="部门编号" clickorderby="true" valuestyleproperty="style='mso-number-format:\@'">
					<inputbox jsvalidate="isNotEmpty(#label#列不允许为空)"/>
				</col>
				<col column="deptname" label="部门名" clickorderby="true"/>
				<col column="manager" label="部门经理"/>
				<col column="builtdate" label="创建日期" clickorderby="true" datatype="date{yyyy-MM-dd}">
					<inputbox type="datepicker"  jsvalidate="isDate(#data#格式不对，必须为yyyy-MM-dd格式)"/>
				</col>
				<col column="performance" label="表现" clickorderby="true" filter="true">
					<inputbox type="selectbox">
						<option value="优秀" label="优秀"/> 
						<option value="良好" label="良好" />
						<option value="较好" label="较好" />
						<option value="很差" label="很差" />
					</inputbox>
				</col>
				<col column="description" label="简介" datatype="clob" width="300px">
					<inputbox type="textareabox"/>
				</col>
			</display>
			<sql>
			  <select>
				<value>
					<![CDATA[SELECT * FROM tbl_department where  {#condition#} order by deptno]]>
				</value>
				<condition name="txtdeptno" label="部门编号">
					<value>
						<![CDATA[(deptno like  '%#data#%' )]]>
					</value>
				</condition>
			  </select>
			  <insert>
			  	  <params>
			  	  	 <param name="param1" value=""/><!-- 稍后用来保存存储过程返回值 -->
			  	 	 <param name="updatetype" value="insert"/><!-- 定义一个变量标识当前操作类型方便传到JAVA类中，这样可以增、删、改共用一个JAVA类 -->
			  	  </params>
			  	  <value>
		  		 		#{param1}=call sp_testInsertData(uuid{},@{deptno},@{deptname},@{manager},@{builtdate},@{performance},@{description});
		  		  </value>
		  		  <value provider="class">com.wabacusdemo.UpdateData_spage1Report4</value>
			  </insert>
			  <update>
			  		<params>
			  	 	 	<param name="updatetype" value="update"/><!-- 定义一个变量标识当前操作类型方便传到JAVA类中，这样可以增、删、改共用一个JAVA类 -->
			  	 	</params>
			  	 	<value datasource="">
				     rrequest{rtnValue}=call sp_testUpdateData(@{deptno},@{deptno__old},@{manager},@{builtdate},@{performance},@{description});
				   </value>
				   <value datasource="">
				     update tbl_baseinfo(@{deptno}) where deptno=@{deptno__old};
				   </value>
				   <value datasource="" provider="class">
				   	com.wabacusdemo.UpdateData_spage1Report4
				   </value>
			  </update>
			  <delete>
			  	 <params>
			  	 	 <param name="updatetype" value="delete"/><!-- 定义一个变量标识当前操作类型方便传到JAVA类中，这样可以增、删、改共用一个JAVA类 -->
			  	 </params>
			  	 <value datasource="">
		  	 		call sp_testDeleteData(@{deptno});
				 </value>
				 <value datasource="">
			  	 	update tbl_baseinfo set deptno='' where deptno=@{deptno__old};
			  	 </value>
			  	 <value provider="class">com.wabacusdemo.UpdateData_spage1Report4</value>
			  </delete>
			</sql>
		</report>
	</page>
</applications>